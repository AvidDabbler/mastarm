#!/usr/bin/env node

const commander = require('commander')
const path = require('path')

const mastarmVersion = require('../package.json').version

commander
  .version(mastarmVersion)
  .command('build [entries...]', 'Bundle JavaScript & CSS')
  .command('commit', 'Force intelligent commit messages.')
  .command('deploy', 'Bundle & Deploy JavaScript & CSS')
  .command('flow [command]', 'Run flow on the current directory.')
  .command('format [entries...]', 'Format JavaScript')
  .command('lint', 'Lint JavaScript')
  .command(
    'lint-messages [paths...]',
    'Check existence of messages used in source code.'
  )
  .command(
    'prepublish [entries...]',
    'Transpile JavaScript down to ES5 with Babel'
  )
  .command('test [patterns...]', 'Run tests using Jest')
  .option(
    '-c, --config <path>',
    'Path to configuration files.',
    path.join(process.cwd(), '/configurations/default')
  )
  .option('-e, --env <environment>', 'Environment to use.')
  .option('-m, --minify', 'Minify built files.')
  .option('-O, --outdir <dir>', 'Publish directory', '')
  .parse(process.argv)
